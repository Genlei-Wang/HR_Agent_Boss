# Chrome扩展加载问题诊断指南

## 问题现象
插件无法打开，显示错误

## 检查步骤

### 1. 确认加载的目录
**必须加载 `dist` 目录，不是 `boss-greeting-assistant` 目录**

- ✅ 正确：`boss-greeting-assistant/dist`
- ❌ 错误：`boss-greeting-assistant`（根目录）

### 2. 检查必需文件是否存在

在 `dist` 目录下应该有以下文件：

```
dist/
├── manifest.json                    ✅ 必需
├── service-worker-loader.js         ✅ 必需
├── assets/
│   ├── index.ts-CoG0h6cX.js        ✅ Service Worker主文件
│   ├── index.ts-loader-KaEQqxTU.js ✅ Content Script
│   ├── sidepanel-D7Z3QE7C.js        ✅ Sidepanel脚本
│   ├── style-CrDgUXRx.css          ✅ Sidepanel样式
│   ├── message-types-18-naiTu.js    ✅ 必需
│   ├── utils-ChEk1Stn.js           ✅ 必需
│   └── ai-service.interface-*.js    ✅ 必需
└── src/
    └── sidepanel/
        └── index.html               ✅ 必需
```

### 3. 检查 Chrome 扩展错误

1. 打开 `chrome://extensions/`
2. 找到扩展，点击"错误"按钮（如果有）
3. 查看 Service Worker 控制台：
   - 点击扩展卡片下的"service worker"链接
   - 查看控制台中的错误信息

### 4. 常见错误及解决方案

#### 错误1：无法加载 Service Worker
**原因**：`service-worker-loader.js` 中的导入路径错误
**解决**：检查 `service-worker-loader.js` 内容应为：
```javascript
import './assets/index.ts-CoG0h6cX.js';
```

#### 错误2：无法加载 Sidepanel
**原因**：HTML 中的资源路径错误
**解决**：检查 `src/sidepanel/index.html` 中的路径应为相对路径：
```html
<script src="../../assets/sidepanel-D7Z3QE7C.js"></script>
<link href="../../assets/style-CrDgUXRx.css">
```

#### 错误3：模块导入失败
**原因**：ES6 模块导入路径问题
**解决**：确保所有导入使用相对路径

### 5. 验证清单

- [ ] 加载的是 `dist` 目录，不是根目录
- [ ] `manifest.json` 存在且格式正确
- [ ] `service-worker-loader.js` 存在
- [ ] `src/sidepanel/index.html` 存在
- [ ] `assets/` 目录下所有文件都存在
- [ ] Chrome 浏览器版本 >= 135（支持 sidePanel API）
- [ ] 已启用"开发者模式"

### 6. 如果仍然无法加载

请提供以下信息：
1. Chrome 版本号
2. Service Worker 控制台的完整错误信息
3. 扩展管理页面显示的错误信息
4. `dist` 目录的完整文件列表

